echo "Patching services.jar"
cd /Volumes/Cooking
mv Temporary/system/framework/services.jar Temporary
baksmali -o services services.jar
cd /Volumes/Cooking
cp -v MIUI-resources/services-jar/WiredAccessoryObserver*.smali Temporary/services/com/android/server
cp -v MIUI-resources/services-jar/usb Temporary/services/com/android/server
cp -v MIUI-resources/services-jar/location Temporary/services/com/android/server
cp -v MIUI-resources/services-jar/LocationManagerService*.smali Temporary/services/com/android/server
echo "Add methods nativesetkeylayout and nativesetstylusiconenabled to inputmanager.smali yourself"
scipts/press_enter
echo "Adding missing animations to PowerManagerService.smali"
cd /Volumes/Cooking/Temporary/services/com/android/server
cat PowerManagerservice.smali | sed -e 's/PowerManagerService;->nativeStartSurfaceFlingerAnimation/PowerManagerService;->nativeStartSurfaceFlingerOffAnimation/' > PowerManagerservice.smali
cat PowerManagerservice.smali | sed -e 's/private native nativeStartSurfaceFlingerAnimation/private native nativeStartSurfaceFlingerOffAnimation/' > PowerManagerservice.smali
echo "here the code for adding onanimation text"
echo "this comes after offanimation text"
cd /Volumes/Cooking/Temporary
smali -o classes.dex services
zip -m services.jar classes.dex
mv services.jar system/framework
echo "Patching Done"