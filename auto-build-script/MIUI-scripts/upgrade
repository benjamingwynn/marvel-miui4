echo "deleting current working folder"
rm -rf WORKING_*
echo "put your base MIUI ROM and an update MIUI ROM in the original_update folder"
echo "install the updated MIUI ROM"
scripts/press_enter
mv WORKING_* UPDATE_MIUI
echo "install your working base ROM"
scripts/press_enter
mv WORKING_* WORKING_Final
echo "backing up previous Apps for re-use"
mkdir -p Backup
cp -v WORKING_Final/system/app/PlayStore.apk Backup
cp -v WORKING_Final/system/app/Camera.apk Backup
cp -v WORKING_Final/system/app/LatinIME.apk Backup
cp -v WORKING_Final/system/app/LocationProvider.apk Backup
echo "creating temporary folders"
rm -rf Temporary-old
rm -rf Temporary-new
mkdir Temporary-old
mkdir Temporary-new
cp -v WORKING_Final/system/framework/framework.jar Temporary-old
cp -v WORKING_Final/system/framework/services.jar Temporary-old
cp -v WORKING_Final/system/framework/android.policy.jar Temporary-old
echo "created old sources"
cp -v UPDATE_MIUI/system/framework/framework-res.apk Temporary-new
cp -v UPDATE_MIUI/system/framework/framework-miui-res.apk Temporary-new
cp -v UPDATE_MIUI/system/framework/framework.jar Temporary-new
cp -v UPDATE_MIUI/system/framework/services.jar Temporary-new
cp -v UPDATE_MIUI/system/framework/android.policy.jar Temporary-new
cp -v UPDATE_MIUI/system/app/Settings.apk Temporary-new
mv -v UPDATE_MIUI/system/app Temporary-new/app
echo "created new sources"
rm -rf UPDATE_MIUI
MIUI-scripts/framework
MIUI-scripts/services
MIUI-scipts/policy
MIUI-scipts/apks
echo "all patching done, you are ready to cook!"
scripts press_enter


